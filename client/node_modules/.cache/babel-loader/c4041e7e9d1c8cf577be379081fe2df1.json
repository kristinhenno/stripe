{"ast":null,"code":"var _jsxFileName = \"/Users/kristinhenno/Documents/Repositories/stripe/Client/src/Checkout2.js\";\nimport React from 'react';\nimport { loadStripe } from '@stripe/stripe-js';\nimport { CardElement, Elements, ElementsConsumer } from '@stripe/react-stripe-js';\n\nclass CheckoutForm extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      order: {\n        payment_method_types: ['card'],\n        line_items: [{\n          price_data: {\n            currency: 'usd',\n            product_data: {\n              name: 'T-shirt'\n            },\n            unit_amount: 2000\n          },\n          quantity: 1\n        }],\n        mode: 'payment',\n        allow_promotion_codes: true\n      }\n    };\n\n    this.handleSubmit = async event => {\n      // Block native form submission.\n      event.preventDefault();\n      const {\n        stripe,\n        elements\n      } = this.props;\n\n      if (!stripe || !elements) {\n        // Stripe.js has not loaded yet. Make sure to disable\n        // form submission until Stripe.js has loaded.\n        return;\n      } // Get a reference to a mounted CardElement. Elements knows how\n      // to find your CardElement because there can only ever be one of\n      // each type of element.\n\n\n      const cardElement = elements.getElement(CardElement);\n      const {\n        error,\n        paymentMethod\n      } = await stripe.createPaymentMethod({\n        type: 'card',\n        card: cardElement\n      });\n\n      if (error) {\n        console.log('[error]', error);\n      } else {\n        console.log('[PaymentMethod]', paymentMethod);\n        const stripe = await stripePromise; // Call your backend to create the Checkout Session\n\n        const response = await fetch('/create-checkout-session', {\n          method: 'POST',\n          headers: {\n            Accept: 'application/json',\n            'Content-type': 'application/json'\n          },\n          body: JSON.stringify({\n            data: this.state.order\n          })\n        });\n        console.log(response);\n        const session = await response.json();\n        console.log(session); // When the customer clicks on the button, redirect them to Checkout.\n\n        const result = await stripe.redirectToCheckout({\n          sessionId: session.id\n        });\n\n        if (result.error) {// If `redirectToCheckout` fails due to a browser or network\n          // error, display the localized error message to your customer\n          // using `result.error.message`.\n        }\n      }\n    };\n  }\n\n  render() {\n    const {\n      stripe\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(CardElement, {\n      options: {\n        style: {\n          base: {\n            fontSize: '16px',\n            color: '#424770',\n            '::placeholder': {\n              color: '#aab7c4'\n            }\n          },\n          invalid: {\n            color: '#9e2146'\n          }\n        }\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      disabled: !stripe,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }\n    }, \"Pay\"));\n  }\n\n}\n\nconst InjectedCheckoutForm = () => {\n  return /*#__PURE__*/React.createElement(ElementsConsumer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 5\n    }\n  }, ({\n    elements,\n    stripe\n  }) => /*#__PURE__*/React.createElement(CheckoutForm, {\n    elements: elements,\n    stripe: stripe,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 9\n    }\n  }));\n}; // Make sure to call `loadStripe` outside of a component’s render to avoid\n// recreating the `Stripe` object on every render.\n\n\nconst stripePromise = loadStripe('pk_test_9cWSl1Mlu5mEFLGQajwgixZx00gIx5qQeQ');\n\nconst Checkout2 = () => {\n  return /*#__PURE__*/React.createElement(Elements, {\n    stripe: stripePromise,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(InjectedCheckoutForm, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default Checkout2;","map":{"version":3,"sources":["/Users/kristinhenno/Documents/Repositories/stripe/Client/src/Checkout2.js"],"names":["React","loadStripe","CardElement","Elements","ElementsConsumer","CheckoutForm","Component","state","order","payment_method_types","line_items","price_data","currency","product_data","name","unit_amount","quantity","mode","allow_promotion_codes","handleSubmit","event","preventDefault","stripe","elements","props","cardElement","getElement","error","paymentMethod","createPaymentMethod","type","card","console","log","stripePromise","response","fetch","method","headers","Accept","body","JSON","stringify","data","session","json","result","redirectToCheckout","sessionId","id","render","style","base","fontSize","color","invalid","InjectedCheckoutForm","Checkout2"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {loadStripe} from '@stripe/stripe-js';\nimport {CardElement, Elements, ElementsConsumer} from '@stripe/react-stripe-js';\n\nclass CheckoutForm extends React.Component {\n  state = {\n    order: {\n    payment_method_types: ['card'],\n    line_items: [\n      {\n        price_data: {\n          currency: 'usd',\n          product_data: {\n            name: 'T-shirt',\n          },\n          unit_amount: 2000,\n        },\n        quantity: 1,\n      },\n    ],\n    mode: 'payment',\n    allow_promotion_codes: true,\n  }\n};\n  handleSubmit = async (event) => {\n    // Block native form submission.\n    event.preventDefault();\n\n    const {stripe, elements} = this.props;\n\n    if (!stripe || !elements) {\n      // Stripe.js has not loaded yet. Make sure to disable\n      // form submission until Stripe.js has loaded.\n      return;\n    }\n\n    // Get a reference to a mounted CardElement. Elements knows how\n    // to find your CardElement because there can only ever be one of\n    // each type of element.\n    const cardElement = elements.getElement(CardElement);\n\n    const {error, paymentMethod} = await stripe.createPaymentMethod({\n      type: 'card',\n      card: cardElement,\n    });\n\n    if (error) {\n      console.log('[error]', error);\n    } else {\n      console.log('[PaymentMethod]', paymentMethod);\n      const stripe = await stripePromise;\n\n      // Call your backend to create the Checkout Session\n      const response = await fetch('/create-checkout-session', { \n        method: 'POST',  \n        headers: {\n        Accept: 'application/json',\n        'Content-type': 'application/json'\n    },\n    body: JSON.stringify({\n        data: this.state.order\n    }) });\n  \n      \n      console.log(response);\n  \n      const session = await response.json();\n    \n      console.log(session);\n  \n      // When the customer clicks on the button, redirect them to Checkout.\n      const result = await stripe.redirectToCheckout({\n        sessionId: session.id,\n      });\n    \n  \n      if (result.error) {\n        // If `redirectToCheckout` fails due to a browser or network\n        // error, display the localized error message to your customer\n        // using `result.error.message`.\n      }\n    }\n  };\n\n  render() {\n    const {stripe} = this.props;\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <CardElement\n          options={{\n            style: {\n              base: {\n                fontSize: '16px',\n                color: '#424770',\n                '::placeholder': {\n                  color: '#aab7c4',\n                },\n              },\n              invalid: {\n                color: '#9e2146',\n              },\n            },\n          }}\n        />\n        <button type=\"submit\" disabled={!stripe}>\n          Pay\n        </button>\n      </form>\n    );\n  }\n}\n\nconst InjectedCheckoutForm = () => {\n  return (\n    <ElementsConsumer>\n      {({elements, stripe}) => (\n        <CheckoutForm elements={elements} stripe={stripe} />\n      )}\n    </ElementsConsumer>\n  );\n};\n\n// Make sure to call `loadStripe` outside of a component’s render to avoid\n// recreating the `Stripe` object on every render.\nconst stripePromise = loadStripe('pk_test_9cWSl1Mlu5mEFLGQajwgixZx00gIx5qQeQ');\n\nconst Checkout2 = () => {\n  return (\n    <Elements stripe={stripePromise}>\n      <InjectedCheckoutForm />\n    </Elements>\n  );\n};\n\nexport default Checkout2;"]},"metadata":{},"sourceType":"module"}