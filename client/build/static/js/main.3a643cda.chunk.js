(this.webpackJsonpstripe=this.webpackJsonpstripe||[]).push([[0],{108:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(16),o=a.n(c),i=(a(77),a(40)),l=a(27),m=a.n(l),s=a(37),u=a(29),d=a(30),p=a(34),h=a(33),E=(a(79),a(57)),g=(a(80),a(58)),f=a(59);function y(){var e=Object(g.a)(["\n\n"]);return y=function(){return e},e}var v=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"componentDidMount",value:function(){localStorage.clear()}},{key:"render",value:function(){return r.a.createElement(x,null,r.a.createElement("h3",{style:{margin:"5%",textAlign:"center"}},"Thank you!"))}}]),a}(r.a.Component),x=f.a.section(y()),b=v,k=r.a.createContext({}),j=function(e){return function(t){return r.a.createElement(k.Consumer,null,(function(a){return r.a.createElement(e,Object.assign({},t,{context:a}))}))}},O=a(128),I=a(130),S=a(110),w=a(131),C=a(68),N=a(64),q=a.n(N),_=a(65),B=a.n(_),J=a(132),T=Object(O.a)((function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(2),maxWidth:"100%",margin:"2%"},image:{width:128,height:128},img:{margin:"auto",display:"block",maxWidth:"100%",maxHeight:"100%"},qt:{width:"10%"},item:{display:"flex"}}})),W=j((function(e){var t=e.cartItem,a=(e.itemKey,e.context.products),n=T();return r.a.createElement("div",null,r.a.createElement(S.a,{className:n.paper},r.a.createElement(I.a,{container:!0,spacing:2},r.a.createElement(I.a,{item:!0},r.a.createElement(C.a,{className:n.image},r.a.createElement("img",{className:n.img,alt:"complex",src:t.product.src}))),r.a.createElement(I.a,{item:!0,xs:12,sm:!0,container:!0},r.a.createElement(I.a,{item:!0,xs:!0,container:!0,direction:"column",spacing:2},r.a.createElement(I.a,{item:!0,xs:!0},r.a.createElement(w.a,{gutterBottom:!0,variant:"subtitle1"},t.product.name),r.a.createElement(w.a,{className:n.item,variant:"body2",gutterBottom:!0},r.a.createElement("p",{className:n.qt}," $",t.product.price),r.a.createElement(J.a,{onClick:function(){return e.addItem({id:t.product.name,products:a,quantity:1})}},r.a.createElement(q.a,null))),r.a.createElement(w.a,{className:n.item,variant:"body2",color:"textSecondary"},r.a.createElement("p",{className:n.qt},"   x",t.quantity,"  "),r.a.createElement(J.a,{onClick:function(){return e.removeItem({id:t.product.name,products:a,quantity:1})}},r.a.createElement(B.a,null)))))))))})),A=a(19),M=Object(O.a)((function(e){return{cartBox:{marginTop:"10%",marginLeft:"15%"},backToShop:{margin:"auto",textAlign:"center"},empty:{margin:"5%"}}})),P=j((function(e){var t=M(),a=e.context.cart,n=Object.keys(a);return console.log(n),r.a.createElement("div",null,n.length>0?r.a.createElement("div",null,r.a.createElement(I.a,{container:!0,spacing:3},r.a.createElement(I.a,{item:!0,xs:6},n.map((function(t,n){return r.a.createElement("div",{key:n},r.a.createElement(W,{itemKey:t,cartItem:a[t.toString()],addItem:e.context.addItem,removeItem:e.context.removeItem}))}))),r.a.createElement(I.a,{className:t.cartBox},r.a.createElement(J.a,{variant:"contained",color:"primary",onClick:function(){return e.context.toCheckout()},role:"link"},"Proceed to Checkout")))):r.a.createElement("div",{className:t.backToShop},r.a.createElement(w.a,{className:t.empty,variant:"h5"},"Cart is Empty!"),r.a.createElement(J.a,{variant:"contained",color:"primary",to:"/",component:A.b,role:"link"},"Back to Shop")))})),G=a(133),Q=a(135),$=a(134),z=Object(O.a)({root:{margin:"20px",width:"250px"},title:{fontSize:14},pos:{marginBottom:12},img:{margin:"auto",display:"block",width:"90%",maxHeight:"80%"}}),D=function(e){var t=e.product,a=z();return r.a.createElement("div",null,r.a.createElement(G.a,{className:a.root},r.a.createElement($.a,null,r.a.createElement(w.a,{className:a.title,color:"textSecondary",gutterBottom:!0},t.name),r.a.createElement(w.a,{variant:"h5",component:"h2"},"$",t.price),r.a.createElement(w.a,{className:a.pos,color:"textSecondary"},r.a.createElement("img",{className:a.img,alt:"complex",src:t.src}))),r.a.createElement(Q.a,null,r.a.createElement(J.a,{variant:"contained",color:"primary",onClick:function(){return e.addItem({id:t.name,product:t,quantity:1})},size:"small"},"Add to Cart"))))},H=Object(O.a)({box:{display:"flex",flexWrap:"wrap",justifyContent:"center"}}),K=j((function(e){var t=e.context.products,a=H();return r.a.createElement("div",{className:a.box},t.map((function(t,a){return r.a.createElement(D,{product:t,key:a,addItem:e.context.addItem})})))})),L=a(66),F=a.n(L),Z=a(5),R=(a(107),a(136)),U=(Object(O.a)({root:{flexGrow:1}}),Object(E.a)("pk_test_9cWSl1Mlu5mEFLGQajwgixZx00gIx5qQeQ")),V=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).addItem=function(e){var t=n.state.cart;console.log(t),t[e.id]?t[e.id].quantity+=e.quantity:t[e.id]=e,localStorage.setItem("cart",JSON.stringify(t)),n.setState({cart:t})},n.removeItem=function(e){var t=n.state.cart;t[e.id]&&(t[e.id].quantity-=e.quantity,0===t[e.id].quantity&&delete t[e.id]),localStorage.setItem("cart",JSON.stringify(t)),n.setState({cart:t})},n.toCheckout=function(){var e=Object(s.a)(m.a.mark((function e(t){var a,r,c,o,i,l,s,u;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=n.state.cart,r=Object.keys(n.state.cart||{}),c=[],o=0;o<r.length;o++)console.log(a[r[o]].product.name),i=100*a[r[o]].product.price,console.log(i),c.push({price_data:{currency:"usd",product_data:{name:a[r[o]].product.name},unit_amount:i},quantity:a[r[o]].quantity}),console.log(c);return e.next=6,U;case 6:return l=e.sent,e.next=9,fetch("/create-checkout-session",{method:"POST",headers:{Accept:"application/json","Content-type":"application/json"},body:JSON.stringify({data:{payment_method_types:["card"],line_items:c,mode:"payment",allow_promotion_codes:!0}})});case 9:return s=e.sent,console.log(s),e.next=13,s.json();case 13:return u=e.sent,console.log(u),e.next=17,l.redirectToCheckout({sessionId:u.id});case 17:e.sent.error;case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={cart:[],products:[]},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(s.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("cart"),e.next=3,F.a.get("http://localhost:8080/products");case 3:a=e.sent,t=t?JSON.parse(t):{},this.setState({products:a.data,cart:t});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return console.log(this.state.cart),r.a.createElement(k.Provider,{value:Object(i.a)(Object(i.a)({},this.state),{},{removeItem:this.removeItem,addItem:this.addItem,toCheckout:this.toCheckout})},r.a.createElement(A.a,null,r.a.createElement(S.a,null,r.a.createElement(R.a,{label:"Products",to:"/",component:A.b}),r.a.createElement(R.a,{label:"Cart",to:"/cart",component:A.b})),r.a.createElement("div",null,r.a.createElement(Z.c,null,r.a.createElement(Z.a,{exact:!0,path:"/",component:K})),r.a.createElement(Z.c,null,r.a.createElement(Z.a,{exact:!0,path:"/success",component:b})),r.a.createElement(Z.c,null,r.a.createElement(Z.a,{exact:!0,path:"/cart",component:P})))))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(V,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},72:function(e,t,a){e.exports=a(108)},77:function(e,t,a){},79:function(e,t,a){}},[[72,1,2]]]);
//# sourceMappingURL=main.3a643cda.chunk.js.map